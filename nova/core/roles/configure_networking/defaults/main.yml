---
configure_networking_with_checks: false # Wait until task issued via REST API has finished

dns_servers: []
dns_servers6: []
dns_server_combined: "{{ dns_servers + dns_servers6 }}"
reconfigure_network: false # Can be used as as CLI var to re-run the network configuration part. Does not when sudo password is required because of vmware_tools plugin limitations
mgmt_ip: {}
netplan_renderer: {}
primary_ipv4: false # False means that DHCP is used or IP is not present
primary_ipv6: false # False means that DHCP is used or IP is not present

# VMWare REST API defaults
admin_account_password: "{{ lookup('community.hashi_vault.hashi_vault', vault_lookup_fragment + 'secret=' + secrets_vault_engine_path | default(environment_name) + '/data/' + secrets_vault_secrets_path | default(project_fullname) + ':' + inventory_hostname + '_' + admin_account) }}"
rest_api_credentials:
  interactive_session: false
  type: USERNAME_PASSWORD
  user_name: "{{ template_username if fresh_deploy and not manual_fresh_deploy else admin_account }}"
  password: "{{ template_password if fresh_deploy and not manual_fresh_deploy else admin_account_password }}"
retries_vmware_api: 60
delay_vmware_api: 3

# Connection mode
primary_network: "{{ interfaces | selectattr('connection', 'equalto', true) | first | default([]) }}"
connection_mode: "{{ primary_network.addresses | selectattr('connection', 'equalto', true) | map(attribute='mode') | first }}"

# List of supported connection modes for what we can configure
# The connection modes are coming from https://github.com/ClarifiedSecurity/Providentia API
supported_connection_modes:
  - ipv4_static
  - ipv6_static

# Routing options
extra_routes: [] # Configure extra routes per interfaces.
