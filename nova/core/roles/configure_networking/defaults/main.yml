---
skip_network_configuration: false # Skip network configuration tasks
fresh_deploy: false
interfaces: []
dns_domain: {}
dns_search: []
dns_servers: []
dns_servers6: []
ntp_servers:
  - "0.pool.ntp.org"
  - "1.pool.ntp.org"
dns_server_combined: "{{ dns_servers + dns_servers6 }}"
configure_networking_pre_roles: [] # List of roles to include before starting the networking configuration tasks
configure_networking_post_roles: [] # List of roles to include after finishing the networking configuration tasks

# Can be used as as CLI var to re-run the network configuration part. Does not when sudo password is required because of vmware_tools plugin limitations
reconfigure_network: false

mgmt_ip: {}

# VMWare REST API defaults
# Using this method allows not defining password key in accounts lists
# Otherwise the Vault lookup will fail even if not used
admin_account_password: >-
  {%- if save_secrets_to_vault and admin_accounts | selectattr('username', 'equalto', admin_account)
    | map(attribute='save_password_to_vault') | first | default(true) -%}
  {{ lookup('community.hashi_vault.hashi_vault',
     vault_lookup_fragment + 'secret=' +
     (secrets_vault_engine_path | default(environment_name)) +
     '/data/' +
     (secrets_vault_secrets_path | default(project_fullname)) +
     ':' + inventory_hostname + '_' + admin_account) }}
  {%- else -%}
  {{ predefined_admin_account_password | default('admin_password_undefined') }}
  {%- endif -%}

rest_api_credentials:
  interactive_session: false
  type: USERNAME_PASSWORD
  user_name: "{{ template_username if fresh_deploy and not manual_fresh_deploy else admin_account }}"
  password: "{{ template_password if fresh_deploy and not manual_fresh_deploy else admin_account_password }}"
retries_vmware_api: 60
delay_vmware_api: 3

# Routing options
extra_routes: [] # Configure extra routes per interfaces.

# PanOS
configure_networking_panos_enable_ipv6: true # Enable IPv6 on configured interfaces
configure_networking_panos_primary_dns_server: "{{ dns_servers[0] }}"
configure_networking_panos_secondary_dns_server: "{{ dns_servers6[0] | default(dns_servers[0]) }}"
configure_networking_panos_primary_ntp_server: "{{ ntp_servers[0] }}"
configure_networking_panos_secondary_ntp_server: "{{ ntp_servers[1] | default(ntp_servers[0]) }}"
