---
- name: Configuring VyOS networking...
  become: false
  delegate_to: localhost
  block:
    - name: Uploading VyoS configuration script...
      ansible.builtin.include_tasks: util/upload_file.yml
      loop:
        - name: firstconfig.sh
          src: config.boot
          dest: /home/vyos/firstconfig.sh

    - name: Configuring network...
      ansible.builtin.include_tasks: util/send_cmd.yml
      vars:
        bin_to_execute: /bin/vbash
        args_to_execute: /home/vyos/firstconfig.sh
