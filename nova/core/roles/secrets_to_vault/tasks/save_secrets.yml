---
- name: Including task to add secrets...
  ansible.builtin.include_tasks: add_secrets.yml
  when: not autogenerated_secret
  loop_control:
    loop_var: pregen_secret
    label: "{{ pregen_secret.key }}"
  loop: "{{ secrets }}"

- name: Including task to add or overwrite secrets...
  ansible.builtin.include_tasks: add_autogenerated_secrets.yml
  when: autogenerated_secret
  loop_control:
    loop_var: autogen_secret
    label: "{{ autogen_secret.key }}"
  loop: "{{ secrets }}"
