---
- name: Checking for OS...
  ansible.builtin.fail:
    msg: vm_template variable is not defined, make sure you have operating system set.
  when:
    - "'os_physical_device' not in group_names"
    - vm_template is not defined

- name: Checking for Network...
  ansible.builtin.fail:
    msg: "{{ inventory_hostname }} is not in any network, make sure to add a network before deploy"
  when: group_names | select('search', '^zone_.*') == []

- name: Checking required variables...
  ansible.builtin.fail:
    msg: project_name, project_id and environment_name variable cannot be empty.
  when:
    - project_name != "my-laptop"
    - project_name == none or project_id == none or environment_name == none
