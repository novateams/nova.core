---
- name: Checking for Network...
  ansible.builtin.fail:
    msg: |
      Missing networking configuration for {{ inventory_hostname }} machine!!!
      Check that you have the following configuration set:
        * {{ inventory_hostname }} machine has at least network interface defined
        * {{ inventory_hostname }} machine interface has the connection flag set to true
  when:
    - infra_env == 'vsphere'
    - primary_network == []
